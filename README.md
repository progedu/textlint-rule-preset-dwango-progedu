textlint-rule-preset-dwango-progedu
=====================================

これは何？
------------------------------

ドワンゴのN高向け教科書執筆に使うtextlintの標準設定です。

使い方
------------------------------

教科書リポジトリでnpm経由でインストールします。

```sh
npm install --save textlint-rule-preset-dwango-progedu
```

textlintの設定ファイル(`.textlintrc`)で、有効化します。
`rules` の中で `preset-dwango-progedu` を `true` にすることで有効化できます。
たとえば以下のような設定を行います。

```
{
  "rules": {
    "preset-dwango-progedu": true
  }
}
```

またプロジェクト独自で、追加の校閲が必要な場合には、以下のように prh用校閲設定ファイルを設定します

```
{
  "rules": {
    "preset-dwango-progedu": true,
    "prh": {
        "rulePaths" :["project_term_rule.yaml"]
    }
  }
}
```

これら設定を完了した後 `npm test` などにより textlintを動かすことで校閲できます。


運用
------------------------------

利用者側は npm の標準的な運用になります。
つまり `package.json` によって管理します。

基本的に `textlint-rule-preset-dwango-progedu` 側は以下のポリシーで運用する予定です。

- 以下の場合に最上位桁バージョンアップ(1.x.x -> 2.0.0)します
    - コードの仕組みの変更
    - 利用者側が対応しなければビルドが通らなくなる可能性が高い場合
    - その他、大規模な影響が見込まれる変更
- 以下の場合は中位桁バージョンアップ(1.1.0 -> 1.2.0)します
    - 新規textlintルールの追加
    - 校閲ルールの大規模な改定
    - その他、利用者側校閲の変更量が多く生じうる場合
- 以下の場合は下位桁バージョンアップ(1.1.0 -> 1.1.1)します
    - 少数の新規校閲ルール追加
    - 校閲ルールの削除
    - 校閲ルールの微修正
    - その他、利用者側校閲の変更量が少なく済む場合

この運用ルールのため、`package.json` では、 `"~1.0"` などのバージョン指定で、最下位桁のみ自動的に追従することをオススメします。


追加更新の手順
------------------------------

全体に校閲を追加したい場合はリポジトリをアップデートした後、npmパッケージを再登録する必要があります。
npm の `textlint-rule-preset-dwango-progedu` についてすでにコラボレータ権限を持っている人から、コラボレータ権限をもらってください。
その後リポジトリトップで `npm publish` することで更新できます。

ソースの簡単な解説
------------------------------

### `lib/` ディレクトリ

#### `textlint-rule-preset-dwango-progedu.js`

本体です。
有効化されることで textlint によって読み込まれて動作する仕組みになります。

#### `term_rule.yaml`

標準として使う校閲のための辞書ファイルです。
ここを編集することで校閲の追加・削除・改定を行えます。


### `samples/` ディレクトリ

このモジュールの動作テストのため、サンプルプロジェクトが入っています。

このモジュールのトップディレクトリで `npm test` をすると、
実際に `samples/` のプロジェクトにおいて `textlint` が走ります。
